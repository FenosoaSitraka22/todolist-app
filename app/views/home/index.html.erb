<!DOCTYPE html>
<html>
<head>
  <style type="text/css">
    .lt{
        texte-decoration:line-through;
      }
  </style>
  <title></title>
</head>
<body>
    <h1 class="text-center mb-4">Welcome to my todolist app</h1>
    <%= render 'layouts/task_form'  %>
    <div class="container">
      <ul>
       
      <% @categories.each do  |category|%>
      <li><%= category.title  %></li>
      <div class="card">
        
        <ul id="<%=category.title%>">
            <% category.tasks.each do |task|  %>
              <%if task.status == true%>
                  <li class ="lt" id="<%=task.id%>" >
                  
                      <%= check_box_tag :ok, 1, task.status, data: { remote: true, url: task_path(task.id), method: :PATCH ,params: { id: task.id, status: task.status}.to_param}%>
                      <%= task.title  %>
                      <% unless task.deadline.nil? %>
                        , to read: <%= task.deadline.strftime('%D')  %>
                      <% end %> 
                    <%= form_tag "/tasks/#{task.id}", method: :delete, remote:true do %> <%= submit_tag "Delete" %> <% end %> 
                  </li>  
                   
                  
              <%else%>
                  <li  id="<%=task.id%>" >
                      <%= check_box_tag :ok, 1, task.status, data: { remote: true, url: task_path(task.id), method: :PATCH ,params: { id: task.id, status: task.status}.to_param}%>
                      <%= task.title  %>
                      <% unless task.deadline.nil? %>
                        , to read: <%= task.deadline.strftime('%D')  %>
                      <% end %>  
                  <%= form_tag "/tasks/#{task.id}", method: :delete, remote:true do %> <%= submit_tag "Delete" %> <% end %>
                  </li>  
                   
                    

              <%end%>
              <%end%>
             
        </ul>
      </div>
      <% end %>
      </ul>
    </div>

    <div class="container">
      <div class="row">
        <% @tasks.each do |task|  %>
          <div class="card col-3">
            <% unless task.image.nil? %>
              <%= image_tag task.image, class: "rounded-circle" %>
            <% end %>
          </div>
        <% end %>
      </div>
    </div>

</body>
</html>
